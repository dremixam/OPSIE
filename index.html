<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Tp OPSIE by dremixam</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Tp OPSIE</h1>
        <h2></h2>
        <a href="https://github.com/dremixam/OPSIE" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="opsie" class="anchor" href="#opsie"><span class="octicon octicon-link"></span></a>OPSIE</h1>

<p>Code source du projet OPSIE de Maxime Mélinon et Soufiyan Yacoubi.</p>

<p>Il est nécéssaire d'avoir installé node.js et git avant toutes choses.</p>

<p>Il est également nécéssaire d'avoir installé instantclient de Oracle avec le SDK (dans /opt/instantclient dans les exemples ci dessous, à mettre où vous voulez en réalité)</p>

<p>Ensuite, à l'aide de npm (utilitaire d'installation de paquets node.js), il faut installer bower:</p>

<pre><code>npm install -g bower
</code></pre>

<p>Pour pouvoir lancer l'application en tâche de fond, il est nécéssaire d'installer le paquet forever (facultatif pour les tests)</p>

<pre><code>npm install -g forever
</code></pre>

<p>Déploiement :</p>

<p>On récupère le code source</p>

<pre><code>git clone git@github.com:dremixam/OPSIE.git
cd OPSIE
</code></pre>

<p>npm va devoir compiler le driver oracle, il est nécéssaire pour cela de regler quelques variables d'environnement pour définir l'endroit où se trouve Oracle Instant Client.</p>

<pre><code>export OCI_LIB_DIR=/opt/instantclient
export OCI_INCLUDE_DIR=/opt/instantclient/sdk/include/
export LD_LIBRARY_PATH=/opt/instantclient
</code></pre>

<p>Si vous êtes sous OSX, il est nécéssaire de définir le répertoire des librairies dynamiques.</p>

<pre><code>export DYLD_LIBRARY_PATH=/opt/instantclient
</code></pre>

<p>Pour plus d'infos sur la connectivité Oracle avec node.js, voir <a href="https://www.npmjs.org/package/oracle">documentation du module "oracle"</a></p>

<p>Tout devrait être bon, on installe les dépendances.</p>

<pre><code>npm install
bower install
</code></pre>

<p>Ensuite, créer un fichier de configuration <code>config.js</code> avec le contenu suivant :</p>

<pre><code>module.exports = {
  // Port d'écoute de l'application
  port : 8099,
  // Titre de l'application
  title : 'OPSIE',
  // Mode debug
  devel : true,
  // Emplacement des fichiers de logs
  logfile : 'logs/access.log',
  // Interface d'écoute (mettre 127.0.0.1 pour que l'application ne soit disponible que localement, 0.0.0.0 sinon dans la plupart des cas)
  ip: '0.0.0.0',
  // Secret utilisé pour le chiffrement des sessions
  secret: 'monsecret',
  // Nom du cookie de session
  sessIdName : 'sessID',
  // Informations de la BDD Oracle (database correspond au SID)
  db : {
    hostname: 'localhost',
    port: 1521,
    user: 'user',
    password: 'password',
    database: 'sid'
  }
}
</code></pre>

<p>lancement :</p>

<pre><code>node server.js
</code></pre>

<p>Sous OSX il est nécéssaire d'ajouter le répertoire <code>instantclient</code> au PATH les librairies dynamiques</p>

<pre><code>DYLD_LIBRARY_PATH="$DYLD_LIBRARY_PATH:/opt/instantclient/" node server.js
</code></pre>

<p>lancement en tâche de fond :</p>

<pre><code>forever start server.js
</code></pre>

<p>Même chose pour OSX</p>

<pre><code>DYLD_LIBRARY_PATH="$DYLD_LIBRARY_PATH:/opt/instantclient/" forever start server.js
</code></pre>

<p>L'application est ensuite accessible à l'adresse <a href="avec%20la%20configuration%20par%20d%C3%A9faut">http://localhost:8099/</a>.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/dremixam/OPSIE/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/dremixam/OPSIE/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/dremixam/OPSIE"></a> is maintained by <a href="https://github.com/dremixam">dremixam</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
